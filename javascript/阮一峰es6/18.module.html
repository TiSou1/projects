<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
       /* ES6 模块的设计思想是尽量的静态化，使得编译时就能确定模块的依赖关系，以及输入和输出的变量。 */
       /* CommonJS 和 AMD 模块，都只能在运行时确定这些东西。比如，CommonJS 模块就是对象，输入时必须查找对象属性。 */
    /*
        CommonJS模块
            let fs = require('fs')
            运行时加载

        ES6模块
            import fs from 'fs'
            “编译时加载”或者静态加载

        import和export
            - export命令用于规定模块的对外接口，
            - import命令用于输入其他模块提供的功能。
        export default
            - 为模块指定默认输出。
            - 一个文件只有一个默认输出
        

        export 与 import 的复合写法
            //先引入在导出
            export { foo, bar } from 'my_module';

            // 可以简单理解为
            import { foo, bar } from 'my_module';
            export { foo, bar };

            export * as ns from "mod";
            // 等同于
            import * as ns from "mod";
            export {ns};

        ES2020提案 引入import()函数，支持动态加载模块。
            - import命令能够接受什么参数，import()函数就能接受什么参数，两者区别主要是后者为动态加载。
           const main = document.querySelector('main');
            //***********import()返回一个 Promise 对象*******
            import(`./section-modules/${someVariable}.js`)
            .then(module => {
                module.loadPageInto(main);
            })
            .catch(err => {
                main.textContent = err.message;
            });

            - import()函数可以用在任何地方，不仅仅是模块，非模块的脚本也可以使用。它是运行时执行，也就是说，什么时候运行到这一句，就会加载指定的模块
            - import()类似于 Node 的require方法，区别主要是前者是异步加载，后者是同步加载。

            下面是import()的一些适用场合。
                - 按需加载。
                - 条件加载,放在if代码块中
                - 动态的模块路径

            import()加载模块成功以后，这个模块会作为一个对象，当作then方法的参数。因此，可以使用对象解构赋值的语法，获取输出接口。
                import('./myModule.js')
                .then(({export1, export2}) => {
                // ...·
                });
            如果模块有default输出接口，可以用参数直接获得。

            如果想同时加载多个模块，可以采用下面的写法。
            Promise.all([
                import('./module1.js'),
                import('./module2.js'),
                import('./module3.js'),
            ])
            .then(([module1, module2, module3]) => {
            ···
            });

            import()也可以用在 async 函数之中。
     */

    </script>
</body>
</html>